<!--
// url = home url of blog
// divname = name of div to target
// category = category to retrieve
// start number of record to retrieve 
// number of records to retrieve
// columns, 
// imgwidth, 
// summarylength
-->

<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
<script style='text/javascript'>
//<![CDATA[
function listCategories(bloghome){
var bloggerUrl = bloghome +'/feeds/posts/summary?alt=json&callback=?&error=?';
	$.getJSON(bloggerUrl, function(json) {
		 //$.error(function() { alert("error"); })
	    var html = '';
		 html += '<option value="all"></option>';
	    $.each(json.feed.category, function(i, categories) {
			html += '<option value="'+categories.term+'">'+categories.term+'</option>';
	     });
	     $('#category').html(html);
	     $('#blogurl').html(bloghome);
	     $('#dkl-blogurl').css('display','none')  
	     $('#dkl-layout').css('display','block')   
	});
}
//]]>
</script>
<style type="text/css">
#dkl-layout{display:none;}
#copyme{display:none;margin-top:40px;}
</style>
</head>
</head>

<body>
<form id="dkl-blogurl">
URL of Blog 
<input type="text" id="bloghome" name="bloghome" size="40" value="http://" /><br/>
</form>
<form id="dkl-layout">
<h2 id="blogurl"></h2>
Choose a Category/Tag name - leave blank for all posts 
<select id="category" name="category">
	<option value="all"></option>
</select><br/>
Give name of target container (the id of the div) 
<input type="text" id="targetdiv" value=""/><br/>

How many posts should be retrieved (Leave blank for all) 
<input type="text" id="TotalRecords" value="All" size="2" /><br/>
Choose start point (If you want to ignore first 2 posts enter 3) 
<input type="text" id="FirstRecord" value=""  size="2" /><br/>
How many columns will result be laid out in 
<input type="text" id="Columns" size="2" value="1" /><br/>
Should the post be laid out horizontally(image with text to right) or vertically(image with text below)? 
<select id="columnOrientation">
	<option value="vertical">vertical</option>
	<option value="horizontal">horizontal</option>
</select><br/>
Check if you wish to make the image square. 
<input type="checkbox" id="square" value="square" /><br/>
Leave blank for automatic image width calculation. 
<input type="text" id="ImageWidth" value=""  size="2" /><br/>
<input type="submit" name="submit" value="Get code to copy and paste" />
</form>
<div id="copyme">
Copy and paste the code into the desired area of your blogger layout.<br/>
<textarea id="copymetext" rows="4" cols="75"></textarea>
</div>
<script>
    $('#bloghome').change(function() { listCategories($('#bloghome').val())} );
    
    $('#dkl-layout').submit(function() {
  		//alert($('#category option:selected').val());
  		//alert($('#targetdiv').val());
  		var copytext = "drawpostmenugrid( '" + $('#targetdiv').val() + "', '" + $('#category option:selected').val() + "', " + $('#Columns').val() + ", " + "'120'" + ", " + "100" + ")" ;
  	     //alert(copytext);
  	     $('#copymetext').val(copytext);
	     $('#copyme').css('display','block')
	     //alert('pokey');
	     //.preventDefault();
  		return false;
});
</script>
</body>
</html>